<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WebXR AR Test</title>
<style>
body { margin:0; overflow:hidden; }
#status{
  position:fixed;
  top:10px;
  left:10px;
  background:rgba(0,0,0,0.7);
  color:#fff;
  padding:8px 12px;
  border-radius:6px;
  z-index:9999;
}
.ar-button{
  background:rgba(0,0,0,0.85)!important;
  border:1px solid rgba(255,255,255,0.5)!important;
}
</style>
</head>
<body>

<div id="status">초기화 중...</div>

<script type="module">

import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js';
import { ARButton } from 'https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/webxr/ARButton.js';

const status = document.getElementById("status");

let scene = new THREE.Scene();
let camera = new THREE.PerspectiveCamera(70, window.innerWidth/window.innerHeight, 0.01, 20);

let renderer = new THREE.WebGLRenderer({alpha:true, antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.xr.enabled = true;
document.body.appendChild(renderer.domElement);

scene.add(new THREE.HemisphereLight(0xffffff,0x444444,1.2));

if (!navigator.xr) {
  status.innerText = "❌ WebXR 미지원 브라우저";
} else {

  navigator.xr.isSessionSupported('immersive-ar').then((supported)=>{

    if(supported){

      status.innerText = "✅ AR 지원됨 - 버튼 생성";

      const button = ARButton.createButton(renderer,{
        optionalFeatures:['local-floor','hit-test']
      });

      button.classList.add('ar-button');
      document.body.appendChild(button);

    } else {
      status.innerText = "❌ immersive-ar 미지원";
    }

  }).catch(err=>{
    status.innerText = "XR 체크 오류";
    console.error(err);
  });

}

renderer.setAnimationLoop(()=>{
  renderer.render(scene,camera);
});

</script>
</body>
</html>
